<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Buscador de Mesas</title>

 <style>
   body {
     margin: 0;
     font-family: Arial, sans-serif;
     min-height: 100vh;
     display: flex;
     justify-content: center;
     align-items: center;
     padding: 18px;
     box-sizing: border-box;

     /* Fondo */
     background-image: url("fondo.jpg");
     background-size: cover;
     background-position: center;
     background-repeat: no-repeat;
   }

   /* Capa oscura suave para que el texto siempre se lea */
   body::before {
     content: "";
     position: fixed;
     inset: 0;
     background: rgba(0,0,0,0.25);
     z-index: 0;
   }

   .card {
     position: relative;
     z-index: 1;
     width: 100%;
     max-width: 680px;
     background: rgba(255,255,255,0.85);
     backdrop-filter: blur(10px);
     -webkit-backdrop-filter: blur(10px);
     border-radius: 22px;
     padding: 26px 22px;
     box-shadow: 0 10px 30px rgba(0,0,0,0.25);
     border: 2px solid rgba(255,255,255,0.6);
   }

   h1 {
     margin: 0 0 12px 0;
     font-size: 34px;
     font-weight: 900;
     text-align: center;
     color: #0b2e59;
     letter-spacing: 0.5px;
   }

   .subtitle {
     text-align: center;
     font-size: 18px;
     font-weight: 700;
     margin-bottom: 8px;
     color: #222;
   }

   .example {
     text-align: center;
     font-size: 16px;
     margin-bottom: 18px;
     color: #444;
   }

   input {
     width: 100%;
     padding: 18px;
     font-size: 22px;
     border-radius: 16px;
     border: 2px solid #cfcfcf;
     outline: none;
     box-sizing: border-box;
     margin-bottom: 18px;
     font-weight: 800;
   }

   .buttons {
     display: flex;
     gap: 14px;
     justify-content: center;
     flex-wrap: wrap;
     margin-bottom: 18px;
   }

   button {
     flex: 1;
     min-width: 220px;
     padding: 16px;
     font-size: 18px;
     border-radius: 16px;
     border: none;
     cursor: pointer;
     font-weight: 900;
     transition: 0.2s ease;
     box-shadow: 0 6px 14px rgba(0,0,0,0.15);
   }

   .btn-nombre {
     background: #0b4aa1;
     color: white;
   }

   .btn-nombre:hover {
     background: #083a7d;
   }

   .btn-mesa {
     background: #e6a600;
     color: #222;
   }

   .btn-mesa:hover {
     background: #c98f00;
   }

   .msg {
     margin-top: 10px;
     font-size: 16px;
     font-weight: 700;
     color: #1a1a1a;
     text-align: center;
   }

   /* RESULTADOS */
   #resultado {
     margin-top: 18px;
   }

   .mesa-header {
     background: rgba(11, 74, 161, 0.15);
     border: 2px solid rgba(11, 74, 161, 0.25);
     padding: 14px;
     border-radius: 18px;
     font-size: 28px;
     font-weight: 900;
     text-align: center;
     color: #0b2e59;
     margin-bottom: 18px;
     box-shadow: inset 0 0 8px rgba(0,0,0,0.05);
   }

   .result-item {
     display: flex;
     justify-content: space-between;
     align-items: center;
     gap: 14px;
     padding: 16px 14px;
     margin-bottom: 12px;
     border-radius: 18px;

     /* Fondo tipo tarjeta */
     background: rgba(255,255,255,0.95);
     border: 2px solid rgba(0,0,0,0.08);
     box-shadow: 0 4px 10px rgba(0,0,0,0.08);
   }

   .result-name {
     font-size: 20px;
     font-weight: 900;
     color: #0b2e59;
     line-height: 1.25;
   }

   .mesa-badge {
     background: #0b4aa1;
     color: white;
     font-size: 16px;
     font-weight: 900;
     padding: 10px 14px;
     border-radius: 14px;
     white-space: nowrap;
     box-shadow: 0 5px 10px rgba(0,0,0,0.15);
   }

   .count {
     margin-top: 16px;
     font-size: 18px;
     font-weight: 900;
     text-align: center;
     color: #0b2e59;
   }

   .hint {
     margin-top: 10px;
     font-size: 15px;
     text-align: center;
     color: #333;
     font-weight: 700;
   }

   footer {
     margin-top: 14px;
     text-align: center;
     font-size: 14px;
     color: #222;
     font-weight: 700;
     opacity: 0.9;
   }

   @media (max-width: 520px) {
     h1 { font-size: 28px; }
     input { font-size: 20px; }
     .result-name { font-size: 18px; }
     .mesa-badge { font-size: 15px; padding: 9px 12px; }
   }
 </style>
</head>

<body>
 <div class="card">
   <h1>üåø Buscador de Mesas</h1>
   <div class="subtitle">Ingresa tu apellido o tu n√∫mero de mesa</div>
   <div class="example">Ejemplo: <b>Gonz√°lez</b> o <b>12</b></div>

   <input type="text" id="busqueda" placeholder="Escribe aqu√≠..." autocomplete="off">

   <div class="buttons">
     <button class="btn-nombre" onclick="buscarPorApellido()">üîç Buscar por Nombre</button>
     <button class="btn-mesa" onclick="buscarPorMesa()">ü™ë Buscar por Mesa</button>
   </div>

   <div class="msg" id="estado">‚è≥ Cargando invitados...</div>

   <div id="resultado"></div>

   <div class="hint">Si no encuentras tu nombre, prueba con tu primer apellido üòä</div>

   <footer>Flo & Tom√°s üíô</footer>
 </div>

 <script>
   let datos = [];

   fetch("invitados.csv")
     .then(response => response.text())
     .then(text => {
       const lineas = text.trim().split("\n");

       lineas.forEach((linea, index) => {
         if(index === 0) return; // salta encabezado

         const partes = linea.split(",");

         if(partes.length < 3) return;

         const num = partes[0].trim();
         const nombre = partes[1].trim();
         const mesa = partes[2].trim();

         datos.push({ num, nombre, mesa });
       });

       document.getElementById("estado").innerHTML =
         "‚úÖ Listo. Ahora puedes buscar por apellido o por n√∫mero de mesa.";
     })
     .catch(err => {
       document.getElementById("estado").innerHTML =
         "‚ùå Error cargando invitados.csv. Revisa que est√© en el repositorio.";
     });

   function buscarPorApellido() {
     const query = document.getElementById("busqueda").value.trim().toLowerCase();

     if(query.length === 0) {
       mostrarMensaje("‚ö†Ô∏è Escribe un apellido primero.");
       return;
     }

     const resultado = datos.filter(inv => {
       const palabras = inv.nombre.toLowerCase().split(" ");
       return palabras.includes(query);
     });

     mostrarResultado(resultado, null);
   }

   function buscarPorMesa() {
     const query = document.getElementById("busqueda").value.trim();

     if(query.length === 0) {
       mostrarMensaje("‚ö†Ô∏è Escribe un n√∫mero de mesa primero.");
       return;
     }

     const resultado = datos.filter(inv => inv.mesa === query);

     mostrarResultado(resultado, query);
   }

   function mostrarMensaje(msg) {
     document.getElementById("resultado").innerHTML =
       `<div class="count">${msg}</div>`;
   }

   function mostrarResultado(resultado, mesaBuscada) {
     const div = document.getElementById("resultado");
     div.innerHTML = "";

     if(resultado.length === 0) {
       div.innerHTML = `<div class="count">No se encontraron resultados.</div>`;
       return;
     }

     if(mesaBuscada !== null) {
       div.innerHTML += `<div class="mesa-header">ü™ë MESA ${mesaBuscada}</div>`;
     }

     resultado.forEach(inv => {
       div.innerHTML += `
         <div class="result-item">
           <div class="result-name">${inv.nombre}</div>
           <div class="mesa-badge">Mesa ${inv.mesa}</div>
         </div>
       `;
     });

     div.innerHTML += `<div class="count">Resultados encontrados: ${resultado.length}</div>`;
   }
 </script>
</body>
</html>
