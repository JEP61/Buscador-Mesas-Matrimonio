<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Buscador de Mesas</title>

 <style>
   * {
     box-sizing: border-box;
   }

   body {
     margin: 0;
     font-family: Arial, sans-serif;

     height: 100vh;
     height: 100dvh;

     display: flex;
     justify-content: center;
     align-items: center;

     background-image: url("fondo.jpg");
     background-size: cover;
     background-position: center;
     background-repeat: no-repeat;

     overflow: hidden;
   }

   .overlay {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background: rgba(0,0,0,0.28);
     z-index: 0;
   }

   .card {
     position: relative;
     z-index: 1;

     width: 92%;
     max-width: 560px;

     background: rgba(255,255,255,0.82);
     backdrop-filter: blur(10px);
     -webkit-backdrop-filter: blur(10px);

     border-radius: 22px;
     padding: 22px;

     box-shadow: 0 10px 26px rgba(0,0,0,0.28);
     text-align: center;

     max-height: 90dvh;
     overflow-y: auto;
   }

   h1 {
     margin: 0;
     font-size: 34px;
     color: #133d66;
     font-weight: 900;
     letter-spacing: 0.5px;
   }

   .novios {
     margin-top: 10px;
     font-size: 18px;
     font-weight: 900;
     color: #133d66;
   }

   .subtitulo {
     margin-top: 14px;
     font-size: 18px;
     font-weight: 800;
     color: #333;
     line-height: 1.35;
   }

   .ejemplo {
     font-size: 16px;
     margin-top: 8px;
     color: #444;
     font-weight: 700;
   }

   input {
     width: 100%;
     font-size: 22px;
     padding: 16px;
     border-radius: 14px;
     border: 2px solid rgba(0,0,0,0.12);
     margin-top: 18px;
     outline: none;
     font-weight: 800;
     text-align: center;
     background: rgba(255,255,255,0.95);
   }

   .buttons {
     display: flex;
     gap: 14px;
     margin-top: 16px;
     justify-content: center;
     flex-wrap: wrap;
   }

   button {
     flex: 1;
     min-width: 230px;
     padding: 16px;
     font-size: 20px;
     font-weight: 900;
     border: none;
     border-radius: 16px;
     cursor: pointer;
     transition: 0.2s;
     box-shadow: 0 6px 14px rgba(0,0,0,0.18);
   }

   .btn-apellido {
     background: linear-gradient(180deg, #0d4a9c, #0b3e83);
     color: white;
   }

   .btn-apellido:hover {
     transform: scale(1.02);
   }

   .btn-mesa {
     background: linear-gradient(180deg, #f4b400, #e6a600);
     color: #1d1d1d;
   }

   .btn-mesa:hover {
     transform: scale(1.02);
   }

   .estado {
     margin-top: 16px;
     font-size: 16px;
     font-weight: 800;
     color: #111;
     background: rgba(255,255,255,0.70);
     padding: 12px;
     border-radius: 14px;
     border: 1px solid rgba(0,0,0,0.15);
     line-height: 1.4;
   }

   .resultado {
     margin-top: 16px;
     text-align: left;
     font-size: 20px;
     font-weight: 800;
     color: #111;

     background: rgba(255,255,255,0.78);
     padding: 14px;
     border-radius: 18px;
     border: 1px solid rgba(0,0,0,0.12);

     max-height: 320px;
     overflow-y: auto;
   }

   .persona {
     display: flex;
     justify-content: space-between;
     align-items: center;
     gap: 10px;

     padding: 12px 10px;
     font-size: 20px;
     font-weight: 900;

     background: rgba(13,74,156,0.12);
     border-radius: 12px;
     margin-bottom: 10px;
   }

   .persona:last-child {
     margin-bottom: 0;
   }

   .mesaTag {
     background: linear-gradient(180deg, #133d66, #0b2c4f);
     color: white;
     padding: 8px 14px;
     border-radius: 14px;
     font-size: 16px;
     font-weight: 900;
     white-space: nowrap;
     box-shadow: 0 4px 10px rgba(0,0,0,0.18);
   }

   .mesaTitulo {
     background: rgba(255,255,255,0.9);
     border: 2px solid rgba(19,61,102,0.25);
     border-radius: 18px;
     padding: 12px;
     font-size: 24px;
     font-weight: 900;
     text-align: center;
     margin-bottom: 14px;
     color: #133d66;
   }

   .footer {
     margin-top: 12px;
     font-size: 15px;
     font-weight: 800;
     color: #222;
     text-align: center;
     line-height: 1.5;
   }

   @media (max-width: 500px) {
     h1 { font-size: 30px; }
     .novios { font-size: 16px; }
     input { font-size: 20px; }
     button { font-size: 18px; }
     .persona { font-size: 18px; }
     .mesaTag { font-size: 14px; }
   }
 </style>
</head>

<body>
 <div class="overlay"></div>

 <div class="card">
   <h1>üåø Buscador de Mesas</h1>
   <div class="novios">Florencia Pino & Tom√°s Godoy üíô</div>

   <div class="subtitulo">
     Ingresa tu apellido o tu n√∫mero de mesa
   </div>

   <div class="ejemplo">
     Ejemplo: Gonz√°lez o 12
   </div>

   <input id="busqueda" type="text" placeholder="Escribe aqu√≠..." autocomplete="off">

   <div class="buttons">
     <button class="btn-apellido" onclick="buscarPorApellido()">üîç Buscar por Apellido</button>
     <button class="btn-mesa" onclick="buscarPorMesa()">ü™ë Buscar por Mesa</button>
   </div>

   <div class="estado" id="estado">
     Escribe un apellido o un n√∫mero de mesa y presiona el bot√≥n correspondiente.
     <br><br>
     Si no aparece, prueba con tu segundo apellido üòä
   </div>

   <div class="resultado" id="resultado"></div>

   <div class="footer">
     Flo & Tom√°s üíô
   </div>
 </div>

 <script>
   let invitados = [];

   function normalizarTexto(texto) {
     return texto
       .toLowerCase()
       .normalize("NFD")
       .replace(/[\u0300-\u036f]/g, "")
       .trim();
   }

   fetch("invitados.csv")
     .then(res => res.text())
     .then(data => {
       const lineas = data.split("\n").filter(l => l.trim() !== "");
       invitados = lineas.map(linea => {
         const partes = linea.split(",");
         return {
           mesa: partes[0]?.trim(),
           nombre: partes[1]?.trim()
         };
       });

       document.getElementById("estado").innerHTML =
         "‚úÖ Invitados cargados: " + invitados.length +
         "<br><br>Escribe un apellido o un n√∫mero de mesa y presiona el bot√≥n correspondiente.";
     })
     .catch(() => {
       document.getElementById("estado").innerText =
         "‚ùå Error cargando invitados.csv. Revisa que est√© subido en GitHub.";
     });

   function limpiarResultado() {
     document.getElementById("resultado").innerHTML = "";
   }

   function buscarPorApellido() {
     limpiarResultado();

     const texto = normalizarTexto(document.getElementById("busqueda").value);
     if (!texto) return;

     const resultados = invitados.filter(inv => {
       const nombreNorm = normalizarTexto(inv.nombre);

       const palabras = nombreNorm.split(" ");

       return palabras.includes(texto);
     });

     mostrarResultadosNombre(resultados);
   }

   function buscarPorMesa() {
     limpiarResultado();

     const texto = normalizarTexto(document.getElementById("busqueda").value);
     if (!texto) return;

     const resultados = invitados.filter(inv => normalizarTexto(inv.mesa) === texto);

     mostrarResultadosMesa(resultados, texto);
   }

   function mostrarResultadosNombre(resultados) {
     const cont = document.getElementById("resultado");

     if (resultados.length === 0) {
       cont.innerHTML = "<b>No se encontraron resultados.</b>";
       return;
     }

     resultados.forEach(r => {
       cont.innerHTML += `
         <div class="persona">
           <div>${r.nombre}</div>
           <div class="mesaTag">Mesa ${r.mesa}</div>
         </div>
       `;
     });

     cont.innerHTML += `<div style="text-align:center;margin-top:12px;font-weight:900;color:#133d66;">
       Resultados encontrados: ${resultados.length}
     </div>`;
   }

   function mostrarResultadosMesa(resultados, mesa) {
     const cont = document.getElementById("resultado");

     if (resultados.length === 0) {
       cont.innerHTML = "<b>No se encontraron resultados para esa mesa.</b>";
       return;
     }

     cont.innerHTML = `<div class="mesaTitulo">ü™ë MESA ${mesa}</div>`;

     resultados.forEach(r => {
       cont.innerHTML += `
         <div class="persona">
           <div>${r.nombre}</div>
         </div>
       `;
     });

     cont.innerHTML += `<div style="text-align:center;margin-top:12px;font-weight:900;color:#133d66;">
       Invitados encontrados: ${resultados.length}
     </div>`;
   }
 </script>
</body>
</html>
