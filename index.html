<!DOCTYPE html>
<html lang="es">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Buscador de Mesas</title>

 <style>
   body {
     margin: 0;
     font-family: Arial, sans-serif;

     min-height: 100vh;
     height: 100svh; /* para iPhone Safari moderno */
     display: flex;
     justify-content: center;
     align-items: center;

     padding: 14px;
     box-sizing: border-box;

     background-image: url("fondo.jpg");
     background-size: cover;
     background-position: center;
     background-repeat: no-repeat;
     overflow: hidden;
   }

   .overlay {
     position: fixed;
     top: 0; left: 0;
     width: 100%;
     height: 100%;
     background: rgba(0,0,0,0.28);
     z-index: 0;
   }

   .card {
     position: relative;
     z-index: 1;

     width: 100%;
     max-width: 560px;

     background: rgba(255,255,255,0.82);
     backdrop-filter: blur(10px);
     -webkit-backdrop-filter: blur(10px);

     border-radius: 22px;
     padding: 22px;

     box-shadow: 0 10px 26px rgba(0,0,0,0.28);
     text-align: center;

     max-height: calc(100svh - 28px);
     overflow-y: auto;
   }

   h1 {
     margin: 0;
     font-size: 34px;
     color: #133d66;
     font-weight: 900;
     letter-spacing: 0.5px;
   }

   .subtitulo {
     margin-top: 10px;
     font-size: 18px;
     font-weight: 700;
     color: #333;
   }

   .ejemplo {
     font-size: 16px;
     margin-top: 6px;
     color: #444;
     font-weight: 600;
   }

   .novios {
     margin-top: 12px;
     font-size: 18px;
     font-weight: 900;
     color: #0d4a9c;
   }

   input {
     width: 100%;
     font-size: 22px;
     padding: 16px;
     border-radius: 14px;
     border: 2px solid rgba(0,0,0,0.12);
     margin-top: 16px;
     box-sizing: border-box;
     outline: none;
     font-weight: 800;
     text-align: center;
     background: rgba(255,255,255,0.95);
   }

   .buttons {
     display: flex;
     gap: 14px;
     margin-top: 16px;
     justify-content: center;
     flex-wrap: wrap;
   }

   button {
     flex: 1;
     min-width: 230px;
     padding: 16px;
     font-size: 20px;
     font-weight: 900;
     border: none;
     border-radius: 16px;
     cursor: pointer;
     transition: 0.2s;
     box-shadow: 0 6px 14px rgba(0,0,0,0.18);
   }

   .btn-nombre {
     background: linear-gradient(180deg, #0d4a9c, #0b3e83);
     color: white;
   }

   .btn-nombre:hover {
     transform: scale(1.02);
   }

   .btn-mesa {
     background: linear-gradient(180deg, #f4b400, #e6a600);
     color: #1d1d1d;
   }

   .btn-mesa:hover {
     transform: scale(1.02);
   }

   .hint {
     margin-top: 14px;
     font-size: 16px;
     font-weight: 700;
     color: #111;
     background: rgba(255,255,255,0.65);
     padding: 12px;
     border-radius: 14px;
     border: 1px solid rgba(0,0,0,0.15);
     line-height: 1.4;
   }

   .resultado {
     margin-top: 16px;
     text-align: left;
     font-size: 20px;
     font-weight: 800;
     color: #111;

     background: rgba(255,255,255,0.78);
     padding: 14px;
     border-radius: 18px;
     border: 1px solid rgba(0,0,0,0.12);

     max-height: 320px;
     overflow-y: auto;
   }

   .persona {
     display: flex;
     justify-content: space-between;
     align-items: center;
     gap: 10px;

     padding: 12px 10px;
     border-bottom: 1px solid rgba(0,0,0,0.12);
     font-size: 20px;
     font-weight: 900;

     background: rgba(13,74,156,0.08);
     border-radius: 12px;
     margin-bottom: 10px;
   }

   .persona:last-child {
     border-bottom: none;
     margin-bottom: 0;
   }

   .mesaTag {
     background: linear-gradient(180deg, #133d66, #0b2c4f);
     color: white;
     padding: 8px 14px;
     border-radius: 14px;
     font-size: 16px;
     font-weight: 900;
     white-space: nowrap;
     box-shadow: 0 4px 10px rgba(0,0,0,0.18);
   }

   .mesaTitulo {
     background: rgba(255,255,255,0.9);
     border: 2px solid rgba(19,61,102,0.25);
     border-radius: 18px;
     padding: 12px;
     font-size: 24px;
     font-weight: 900;
     text-align: center;
     margin-bottom: 14px;
     color: #133d66;
   }

   .footer {
     margin-top: 12px;
     font-size: 16px;
     font-weight: 800;
     color: #222;
     text-align: center;
     line-height: 1.5;
   }

   @media (max-width: 500px) {
     h1 { font-size: 30px; }
     .subtitulo { font-size: 17px; }
     .novios { font-size: 17px; }
     input { font-size: 20px; }
     button { font-size: 18px; }
     .persona { font-size: 18px; }
     .mesaTag { font-size: 15px; }
   }
 </style>
</head>

<body>
 <div class="overlay"></div>

 <div class="card">
   <h1>üåø Buscador de Mesas</h1>

   <div class="subtitulo">Ingresa tu apellido o tu n√∫mero de mesa</div>
   <div class="ejemplo">Ejemplo: Gonz√°lez o 12</div>

   <div class="novios">Florencia Pino & Tom√°s Godoy üíô</div>

   <input id="busqueda" type="text" placeholder="Escribe aqu√≠..." autocomplete="off">

   <div class="buttons">
     <button class="btn-nombre" onclick="buscarPorApellido()">üîç Buscar por Nombre</button>
     <button class="btn-mesa" onclick="buscarPorMesa()">ü™ë Buscar por Mesa</button>
   </div>

   <div class="hint" id="estado">
     ‚è≥ Cargando invitados...
   </div>

   <div class="resultado" id="resultado" style="display:none;"></div>
   <div class="footer" id="contador"></div>
 </div>

 <script>
   let datos = [];

   function normalizarTexto(texto) {
     return texto
       .toLowerCase()
       .normalize("NFD")
       .replace(/[\u0300-\u036f]/g, "");
   }

   fetch("invitados.csv")
     .then(response => response.text())
     .then(texto => {
       const lineas = texto.trim().split("\n");

       for (let i = 1; i < lineas.length; i++) {
         const partes = lineas[i].split(",");
         if (partes.length >= 3) {
           const num = partes[0].trim();
           const nombre = partes[1].trim();
           const mesa = partes[2].trim();
           datos.push({ num, nombre, mesa });
         }
       }

       document.getElementById("estado").innerHTML =
         "‚úÖ Listo. Ahora puedes buscar por apellido o por n√∫mero de mesa.<br><b>Invitados cargados:</b> " + datos.length;
     })
     .catch(error => {
       document.getElementById("estado").innerText = "‚ùå Error cargando invitados.csv";
       console.error(error);
     });

   function limpiarResultado() {
     document.getElementById("resultado").innerHTML = "";
     document.getElementById("contador").innerHTML = "";
   }

   function mostrarResultado(lista, mesaBuscada = null) {
     const div = document.getElementById("resultado");
     div.style.display = "block";
     limpiarResultado();

     if (lista.length === 0) {
       div.innerHTML = "‚ùå No se encontraron resultados.";
       return;
     }

     if (mesaBuscada !== null) {
       div.innerHTML += `<div class="mesaTitulo">ü™ë MESA ${mesaBuscada}</div>`;
     }

     lista.forEach(persona => {
       div.innerHTML += `
         <div class="persona">
           <span>${persona.nombre}</span>
           <span class="mesaTag">Mesa ${persona.mesa}</span>
         </div>
       `;
     });

     document.getElementById("contador").innerHTML =
       `<b>Resultados encontrados:</b> ${lista.length}<br>
       Si no encuentras tu nombre, prueba con tu primer apellido üòä`;
   }

   function buscarPorApellido() {
     const queryOriginal = document.getElementById("busqueda").value.trim();
     if (queryOriginal.length === 0) return;

     const query = normalizarTexto(queryOriginal);

     const resultado = datos.filter(inv => {
       const palabras = normalizarTexto(inv.nombre).split(" ");
       return palabras.includes(query);
     });

     mostrarResultado(resultado, null);
   }

   function buscarPorMesa() {
     const query = document.getElementById("busqueda").value.trim();
     if (query.length === 0) return;

     const resultado = datos.filter(inv => inv.mesa === query);

     mostrarResultado(resultado, query);
   }
 </script>
</body>
</html>
